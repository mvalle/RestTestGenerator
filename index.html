<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Rest Test Generator by mvalle</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Rest Test Generator</h1>
        <p class="header">A Program that produces tests for REST endpoints, based on a simple specification.</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/mvalle/RestTestGenerator/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/mvalle/RestTestGenerator/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/mvalle/RestTestGenerator">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/mvalle">mvalle</a></p>


      </header>
      <section>
        <h1>
<a name="motivation-for-this-project" class="anchor" href="#motivation-for-this-project"><span class="octicon octicon-link"></span></a>Motivation for this project</h1>

<p>For my final year project, I'll have to write a simple DSL and a code generator. In order to get my feet wet, I've decided to write a very simple code generator and a DSL/specification format.</p>

<p>In Addition to this, I've decided to write down some of the lessons I've learned along the way.</p>

<h2>
<a name="parsing-is-not-that-hard" class="anchor" href="#parsing-is-not-that-hard"><span class="octicon octicon-link"></span></a>Parsing is not that hard</h2>

<p>Sure, if you want to parse C - good luck. But when using a very simple language, parsing is not really that hard.</p>

<p>In this project I just used some <code>.split()</code> calls and some simple loops. That was all that I needed for this project. That being said, the parser is probably the most complex piece of code in this project.</p>

<p>I can see that if you want to parse something a bit more difficult, a custom parsing tool will be useful. For future versions, I'm planning maybe adding more information to the spec, fx. "this path requires that you are authenticated". For that, I might need to use a parsing tool, but I think I can squeeze some more juice out some good'ol string manipulation tools.</p>

<h2>
<a name="code-generation-gets-messy-quickly" class="anchor" href="#code-generation-gets-messy-quickly"><span class="octicon octicon-link"></span></a>Code generation gets messy quickly</h2>

<p>String manipulation, might work for parsing, but not so much with code generation. It get's messy very quickly.</p>

<p>One of the downsides to using strings is that they are embedded in the code, and it get's confusing to look at. Especially when the host and target language are the same - there is python code in strings inside more python code.</p>

<p>Using nested string formatting, does alleviate some of the pain. I used it here when creating methods inside classes. It allows some separation of concern. But they are still tightly coupled. 
A better alternative would be better use templates that can take care of the code generation.</p>

<p>I've used templating, when generating HTML, and I see no reason why I can't use the same tools to generate code. I've only ever used django.template and Genshi. Genshi is out, as the templating engine will need to be text-based, as opposed to XML-based, because obvously Python is not XML. It also needs to preserve white space, because Python is, well, Python is Python.</p>

<p>Speaking of which...</p>

<h2>
<a name="python-is-not-a-great-target-for-code-generation" class="anchor" href="#python-is-not-a-great-target-for-code-generation"><span class="octicon octicon-link"></span></a>Python is not a great target for code generation</h2>

<p>It's not that it can't be done, it's just that it's inconvenient.</p>

<p>It's mostly because of the whitespace. No. Strike that. It's entirely because of the whitespace.</p>

<p>It you only have two specific levels of indentions, as I had in this case, it works fine. If, on the other had, you have arbitrary nesting, and the output of one procedure can be used in several places with different levels of indentions, then it gets sticky. </p>

<p>If you're generating an other { language }, then you could just spew some code and not care about the formatting at all. Then when the whole code is generated, run it through a beautifier.</p>

<p>The reason I chose Python as the target language for this project is entirely because of the <code>requests</code> library. Recently I used it in a project. After trying various other approaches to testing REST endpoints, using <code>requests</code> it was like a breath of fresh air. It's just so easy to use. That's nothing to sneeze at. The generated code is just the beginning. The code has to be edited afterwards, and for that reason I'll stick with generating Python. At lest for now.</p>

<h2>
<a name="other-lessons" class="anchor" href="#other-lessons"><span class="octicon octicon-link"></span></a>Other lessons</h2>

<h3>
<a name="setuppy" class="anchor" href="#setuppy"><span class="octicon octicon-link"></span></a>setup.py</h3>

<p>I've been writing Python on and off for about 6-7 years, since about Python 2.5 or 2.4. I think I started learning Python (and coding in general) on Ubuntu 5.04, and that's about now 8 years old now.</p>

<p>In all that time, I've never written a setup.py file. That probably says more about what code I've been writing, than anything else. I started writing one for this project, but decided to not commit it. I just need to read up on it a bit more, a create a proper one.</p>

<h3>
<a name="parsing-command-line-arguments" class="anchor" href="#parsing-command-line-arguments"><span class="octicon octicon-link"></span></a>Parsing command line arguments</h3>

<p>Command line arguments are a whole different parsing problem. This version one contains very simple command line arguments. For future releases, I doubt there will be any less arguments. I've looked around and seen a couple of libraries for parsing command line arguments. They should do.</p>
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>